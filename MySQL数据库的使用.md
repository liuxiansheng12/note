
# 数据库的下载

1. 首先进入官网中: `https://www.mysql.com/`
2. 然后点击`DOWNLOADS`，选中`Community`
3. 然后在点击`MySQL on Windows`
4. 然后点击`MySQL Installer`
5. 点击`Looking for the latest GA version?`选中之前的版本
6. 点击`Windows (x86, 32-bit), MSI Installer`
7. 然后在点击`No thanks, just start my download.`就会开始下载





# 数据库的安装过程

要想使用数据库，就必须下载数据库。下载方式如下:


需要注意的是在安装过程中，需要创建密码(abc123)。后面还有一步需要密码验证，最后一步的两个勾取消。

安装好之后，需要打开控制面板，需要关掉后台的服务。
在命令行中，输入services.msc，打开服务。然后在随便点击一项，然后输入一个m(筛选)。选中MySQL。然后右键选中属性。把启动类型改成手动。

卸载，首先在服务中把对应的所有服务关掉。然后在控制面板中点击程序，把关于MySQL的全部卸载掉







# 操作数据库软件的下载
数据库下载完毕后，还需要下载一个连接数据库的工具
进入下载网址  https://www.jetbrains.com/datagrip/download/#section=windows
点击左侧最下方的按钮(选择版本)
然后在点击DOWNLOAD

安装过程中，需要把64位的勾选上和最下面的框(下载Java环境)。安装完成后需要进行破解。

破解:
在网上搜索idea 注册码。复制最后一段英文数据。然后打开我的电脑c盘，找到C:\Windows\System32\drivers\etc\hosts文件，然后右键点击属性，选择安全，然后点击编辑，把 每一项中的完全控制点成允许。
然后在用记事本打开该文件
把复制下来的数据(0.0.0.0 account.jetbrains.com)放在最后一行(另起一行)。然后在点击网站上的获取注册码。
然后选中破解页面的第二项，把获取到的注册码粘贴进去。点击OK。








# 数据库的分类


数据库分为两类，一类是关系型数据库，另一种是非关系型数据库。
关系型数据库包括: MySQL、Oracle、DB2、SQLserver。
非关系型数据库: MongoDB、Redis、Memcache

关系型数据库中存放数据的格式类似表格，条理清晰。







# 数据库软件与操作数据库软件的连接

1. 打开数据库
   1) 同时敲击 联想符号 + R，打开控制页面，输入: `services.msc`
   2) 随便点击一个软件，输入`MySQL`，就会定位到对应的软件位置
   3) 找到安装的`MySQL`，点击左侧的启动此服务，进行启动
   4) 不用时，需要关上安装的`MySQL`数据库，开着消耗计算机的性能
      1) 关闭流程和上面一样，然后点击左侧的停止此服务，进行关闭


2. 操作数据库的软件如果长期不用，可能需要重新进行注册码的设置
   1) 弹出设置窗口，如果没有弹出设置窗口，直接打开了软件，该步就需要进行操作
   2) 去网上，输入idea 注册码，找到一个注册码复制下来
   3) 点击设置窗口的`activation code`按钮，复制下来的注册码会自动填充
   4) 然后点击OK按钮，就会自动打开软件


3. 点击最左侧的加号，选中数据库进行连接，该软件可以连接很多版本的数据库
   1) 如果之前连接过，会自动连接之前的数据库，可以不进行该步操作
   2) 如果是第一次连接数据库，或者更改数据库，都需要进行当前操作
   3) 点击 `+` 号，然后点击第一个，即`data source`，选中对应的数据库，进行连接
      1) 如果连接`MySQL`，会出现一个设置框，设置完才会建立起连接
      2) 设置框中具体的设置
         1) `Name`随便起一个名字
         2) `host`填写数据库的域名，域名填写在第一个方框中
            1) 本机的数据库的域名为`127.0.0.1`
         3) `User`中，填写`root`，
         4) `password`，填写`MySQL`设置的密码，(abc123)
         5) `url`，第一开始是缺少一个插件的，需要点击最下方的感叹号提示下载
            1) 下载完成后，变成绿色的，表示已经进行了连接
            2) 如果下载失败，可能数据库没有打开







# 数据库的新建

1. 原理
   1) 数据库软件就相当于一个大的仓库，内部有很多的子仓库
   2) 子仓库中，是由一个一个表构建而成
   3) 数据库操作，就是操作某一个子仓库中的某一个表
   4) 表有表头和表单
      1) 表就相当于一个数组，数组中的每一项相当于对象，即每一行表单
      2) 表头，为每一个对象中的属性，即每个对象的属性相同


2. 创建一个子仓库的方式
   1) 在连接数据库的软件中，进行子数据库的创建
   2) 在输入指令的输入界面中，输入指令: `create database school;`
      1) 点击cs1，然后在点击一个类似 `笔` 的按钮，就可以打开输入界面
      2) 创建的子仓库的名称为: `school`
   4) 指令书写完成后需要运行，点击播放按钮，就可以创建出对应的仓库


3. 创建某子仓库中表的方式
   1) `MySQL`数据库，操作的就是一个一个具体的表，所以表的创建很关键
   2) 在对应的子仓库上右击鼠标，选中`new`，然后在选中`table`，就会出现创建表的页面
   3) 创建表的页面的具体的操作
      1) `tabel`中，设置表的名称，`Comment`中不用进行填写
      2) 然后点击右侧的 `+` 号，添加一个表头属性
      3) 点击 `+` 号后，添加表头属性，就会进入表头属性的设置
      4) 表头属性的具体设置
         1) `Name`: 输入该表头属性的名称，类似对象属性名
         2) `type`: 输入该表头属性的数据类型
            1) 该属性存放的对应的数据，只能存放设置的类型数据
            2) 具体的类型如下:
               1) `int`: 整数，有长度的限制
               2) `bigint`: 长整数，存放比较长的整数，int放不下了
                  1) 该类型，必须传入长度
                  2) 比如: `bigint(21)`，表示最大长度为21
               3) `float`: 浮点数         
               4) `double`: 双精度浮点数   
               5) `varchar`: 字符串        
                  1) 该类型，必须传入长度
                  2) 比如: `varchar(21)`，表示最大长度为21
               6) `text`: 文本，存放文章，字符更多，字符串类型也满足不了了
         3) 每个属性下面还有四个按钮，进行勾选，具体的作用如下
            1) `Not null`       非空
            2) `auto Inc`       递增，主键必须勾选该属性，其它的不能勾选
            3) `Unique`         不能重复，主键不选该项
            4) `Primary key`    表示主键，主键必须勾选该属性，其它的不能勾选
         4) `type`属性的那一行的后面有一个文件夹的标识
            1) 点击后，打开该属性的说明的编辑页面，即设置该属性的备注
      5) 表头属性设置的注意事项
         1) 每一个表都应该存在一个主键，通常把主键的属性名设置为`id`
            1) 主键的作用: 起一个标识作用
            2) 主键的类型设置为`int`，够用了
            3) 主键: 勾选`auto Inc`和`Primary key`
            4) 主键设置的属性，不用进行数据的存取和操作
            5) 表中，每新添一行表单数据，主键就会进行递增
         2) 备注是每条数据必填的，可以使用文件名加上属性名简单的说明一下



4. 删除一个表中的表头属性
   1) 点击表头的编辑页面，右侧的 `-` 号，就会进行删除


5. 修改一个表中的表头(新增和修改)
   1) 选中具体的表格，右击，然后选中第三个`modify table`
   2) 就会进入该表的表头属性的编辑窗口，进行表头属性的修改


6. 解决数据库中使用中文问题
   1) 打开，连接数据库的软件的输入界面，输入对应的指令进行设置
   2) 依次修改库、表、字段。字段就是存放的数据
   3) 具体的指令如下:
      1) `alter database 子数据库的名称 character set utf8;`  修改某个子数据库中的解码
      2) `alter table 表的名称 default character set utf8;`  修改表中的编码
      3) `alter table 表的名称 convert to character set utf8;`  修改字段编码
   4) 字段就是表中的每一个属性
   5) 上面三个指令书写完成后，也需要运行，并且运行是有具体要求的
      1) 右击鼠标，选中`Run cs1`，就会打开一个窗口，然后选中具体的子数据库
         1) 点开下拉按钮，就可以看到具体的数据库
      2) 如果不选中具体的子数据库，就与指令修改的子数据库编码的数据库对应不起来
      3) 此时就会报错
   










# 往数据库中增加数据的指令

1. 数据库的操作，其实就是操作一个表

2. 一个表，类似一个数组，数组中的每一项都是一个类似对象的存在

3. 新增数据，就相当于在数组中新增一个对象，即表中新增一行表单数据
   1) 对象中的属性，就是表头的属性

4. 具体添加指令
   1) `insert into student ('name', 'age') values ("123", 20);`
   2) 指令解析
      1) `student`: 为操作的表的名称
      2) `'name', 'age'`为表中的表头，即对象中的属性
      3) `"123", 20`为对应的表头属性，对应的属性值，即对象中的属性值

   
5. 新增数据，不用设置主键的数据，即`id`的数据，会根据上一个进行递增


6. 比如: 表中的数据为`[{id: 0, name: 'a', age: 10}]`
   1) 新增后变成了: `[{id: 0, name: 'a', age: 10}, {id: 1, name: '123', age: 20}]`







# 删除数据库中某条数据的指令

1. 数据库的操作，其实就是操作一个表

2. 一个表，类似一个数组，数组中的每一项都是一个类似对象的存在

3. 删除数据，就相当于删除数组中的某个对象，即删除某行表单

4. 具体删除指令
   1) `delete from student where name = "a";`
   2) 指令解析
      1) `student`: 为操作的表的名称
      2) `name = "a"`: 表示删除所有含有`name = "a"`的对象
         1) 即删除还有字段为`name = "a"`的所有条的信息


5. 比如: 表中的数据为`[{id: 0, name: 'a', age: 10}, {id: 1, name: '123', age: 20}]`
   1) 删除后变成了: `[{id: 1, name: '123', age: 20}]`









# 清空一个表单中的所有数据的指令

1. 具体的指令为: `delete from student;`
   1) `student`表示要清空的表单
   2) 即请求对应的数组








# 修改数据库中数据的指令

1. 具体的指令
   1) `update student set name = "456"`;
      1) `student`为操作的表单名
      2) `name = "456"`表示，把该表单下所有对象中的`name`属性的属性值都变成`"456"`
      3) 会修改所有的`name`，所以要注意
   2) `update student set name = "456" where s = "123"`;
      1) `student`为操作的表单名
      2) `s = "123"`表示，把该表单下所有对象中的`s`属性的属性值为`"123"`的对象集中起来
      3) `name = "456"`表示，把集中的对象中的所有`name`属性的属性值都变成`"456"`
      4) 该指令是针对性修改
   3) `update student set name = "456", age = 30 where s = "123"`;
      1) `student`为操作的表单名
      2) `s = "123"`表示，把该表单下所有对象中的`s`属性的属性值为`"123"`的对象集中起来
      3) `name = "456", age = 30`表示
         1) 把集中的对象中的所有`name`属性的属性值都变成`"456"`
         2) 把集中的对象中的所有`age`属性的属性值都变成`"30"`
      4) 该指令是针对性修改，并且是批量修改多个属性







# 得到数据库中某些数据值的指令

1. 查询某个表中的所有数据
   1) 指令为: `select *  from student;`
   2) `student`为操作的表名，获取的就是一个数组格式的数据
   3) 如果该表的数据过大，不建议使用这种方法，容易把数据库查蹦


2. 查询某个表中的某些属性的所有信息
   1) 指令为: `select name, age  from student;`
   2) `student`为操作的表名，获取的就是一个数组格式的数据
   3) 查询该表下的`name`和`age`对应的所有数据，只有这两个属性的值


3. 查询某个表中的某个属性为某个值的所有信息
   1) 指令为: `select * from student where name = "123";`
   2) `student`为操作的表名，获取的就是一个数组格式的数据
   3) 查询该表下的查询`name`为`"123"`，对应的所有数据，所有属性


4. `select age from student where name = "123";`
   1) `student`为操作的表名
   2) 查询name为"123"的所有对象中的age信息




# 查询某个信息共有多少条的指令

1. `select count(1) from student;`
   1) `student`为操作的表名
   2) 查询student下有多少条信息


2. `select count(1) from student where name = "123";`
   1) `student`为操作的表名
   2) 查询该表下，`name= "123"`的信息共有多少条


3. `select count(1) from student where name = "123" and age = "123";`
   1) `student`为操作的表名
   2) 查询`name = "123"` 且` age = "123"` 的字段共有多少条。`Or`为或
   3) 字段就相当于属性





# 得到某些信息的属性值的和的指令


1. `select sum(age) from student;`
   1) `student`为操作的表名
   2) 算出`student`下的所有`age`属性的和，所有age属性进行相加

2. `select sum(age) from student where name = "123";`
   1) `student`为操作的表名
   2) 算出对象中`name= "123"`的所有对象的，所有`age`属性的和


3. `select count(age) from student group by class;`
   1) `student`为操作的表名
   2) 按照字段`class`进行分组，相同的为一组，然后在求出每一组字段为`age`的数据和
   3) 字段就相当于属性







# 得到某些信息的属性值的和的平均值的指令


1. `select avg(age) from student where name = "123";`
   1) `student`为操作的表名
   2) 算出字段`age`的平均数






# 分页查询的指令

1. `select * from student limit 2;`
   1) `student`为操作的表名
   2) 分页查询，每次只查询查询2个条信息
   3) 字段就相当于属性

2. `select * from student limit 2, 2;`
   1) `student`为操作的表名
   2) 分页查询，如果传参，必须是数字
   3) 第一个为偏移，即查询的位置是从第三条开始的(偏移了两条)，并且只查询两条数据
    
  




# 对表中的数据进行排序的指令
 
1. `select * from student order by id;`
   1) `student`为操作的表名
   2) 把所有的数据，按照id字段进行正序排序
   3) 字段就相当于属性  


2. `select * from student order by id desc;`
   1) `student`为操作的表名
   2) 把所有的数据，按照id字段进行倒序排序
   3) 字段就相当于属性  


3. `select * from student order by id desc limit 2, 2;`
   1) `student`为操作的表名
   2) 把所有的数据，按照id字段进行倒序排序，然后在进行分页查询
   3) 字段就相当于属性  


4. 没有数据的表，如果使用排序指令，是会进行报错的









# MySQL数据库中的基础指令
 
1. 都是在连接数据库的软件中的编辑界面中书写的指令


2. 具体的指令以及功能如下
   1) `show  databases;`  显示数据库系统，MySQL是一个数据库系统，内部有很多数据库
   2) `use mysql;`   连接到指定的数据库
   3) `show tables;` 显示所有的表， 数据库的层级: 库-->表-->字段(属性)
   4) `desc db;`     查看指定表的字段
   5) `show create table db;`  创建一个表
   6) `create database school;`  创建一个属于自己的数据库，库名为school










# 使用nodejs驱动数据库

1. nodejs要想驱动数据库，需要下载一个插件，即`mysql`包
   1) 下载方式: `npm i mysql -D`

2. 插件下载好后，每次操作数据库，都需要先与对应的数据库建立起联系
   1) 由于每次操作都需要与数据库建立联系，所以把建立联系的代码封装在一个函数中
   2) 每次操作数据库时，调用一次函数，操作完成后需要断开与数据库的联系
   3) 如果操作完不关闭与数据库的连接，则下次就无法进行操作


3. 与数据库建立联系的代码
```js
var mysql = require("mysql");  
// 连接数据库(对数据库中的表实现增删改查，都是通过下列函数的返回值进行操作)
var connection = () => mysql.createConnection({
    host: "127.0.0.1",   // 数据库IP
    port: "3306",        // 数据库端口
    user: "root",        // 用户名
    password: "abc123",  // 数据库创建时设置的密码
    database: "school"   // 连接到MySQL下具体的那个数据库，即子数据库
});

// 抛出封装好的建立与数据库联系的方法
module.exports = connection;
```



4. 对数据库进行增删改查的操作
   1) 与数据库建立联系后，使用上方对应的驱动数据库的指令，进行数据库的操作
   2) 具体代码如下:
   ```js
   // 引入封装的与数据库建立联系的方法
   var c = require("./dbutil.js");

   // 查询某个表下的全部数据
   function quanb(func) {
       // 对应的指令
       var str = "select * from student;";  
       // 与数据库建立联系
       var connection = c();   
       // 开启与数据库通信的接口
       connection.connect();   
       // 操作数据库，即把上方的指令发送到数据库，数据库实现对应的操作
       // 数据库操作完成，无论是失败还是成功，都会执行回调函数
       connection.query(str, (err, data) => {
           // err为异常信息，data为正常数据
           // 操作成功后，err为null，操作失败后，err为失败信息
           if(!err){
               console.log(data);
               // 执行回调函数
               // 由于操作数据库是异步的，所以请求来临后，必须等数据库操作完成后
               // 才断开服务端与前端的联系，并且此时才能向前端发送读取到的数据库中的数据
               func();
           }else {
               console.log(err);
           }
       })
       connection.end();   // 操作完成后关闭
   }
   ```
   3) 动态设置指令
      1) 比如: 修改数据和新增数据的数据是外界传入的，此时指令就需要动态进行创建
      2) 指令在创建的时候，动态添加的位置，用 `?` 进行替换
      3) 比如: `select * from student where name = ? and age = ?;`;
      4) 对应位置的数据，在`query`函数的第二个参数进行传递，格式为数组
         1) 数组的每一项，对应指令对应位置的 `?` 
      5) 具体的示范代码
      ```js
      // 查询指定的数据
      function zhid(name, age, func) {
          // ?表示数据暂定
          var str = 'select * from student where name = ? and age = ?;'; 
          var connection = c();   // 每次操作前创建连接
          connection.connect();   // 开启
          // 传入暂定的数据(也可以使用字符串拼接的方法，此处就不用传参)
          connection.query(str, [name, age], (err, data) => {
              // err为异常信息，data为正常数据
              if(!err){
                  console.log(data);
                  func();
              }else {
                  console.log(err);
              }
          })
          connection.end();   // 操作完成后关闭
      }

      // 调用传参，动态创建指令
      zhid("a", 12);
      // 经过 ? 和 query函数的替换功能，最终指令变成了:
      // `select * from student where name = 'a' and age = 12;`
      ```



5. 注意点
   1) 访问数据库是异步操作，如果想要读取数据库中的数据，返回给前端就需要回调函数的辅助
   2) 方法中定义的访问数据库的指令，是一个字符串格式的数据
      1) **但是不能使用``定义字符串，否则数据库无法进行正常访问，会报错**
      2) **如果是新增一条数据，指令中的属性名必须使用``进行包裹**
         1) **不能使用''或者""包裹，否则会报指令错误提示**
