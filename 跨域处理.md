# 服务端代理

1. 某个服务端，不允许跨域请求，要想获取到该服务器的内容，就需要进行服务器代理

2. 服务器与服务器之间不存在跨域问题

3. 服务器代理的核心，就是服务器与服务器之间的通信，所以需要借助一个插件`request`
   1) 下载方式: `npm i request -D `;

4. 具体的代理代码
```js
let http = require("http");
let req = require("request");

http.createServer( (request, response) => {
    // 向另一个服务器发送请求
    req({
        url: "请求的url地址",
        method: "POST",    // 请求方式
        headers: {
            // 发送的数据为json格式(没有要求可以不写)
            "content-type": "application/json"
        },
        // 发送的数据(只适用post请求)
        body: {a: 123}
    }, (err, resp, body) => {
        if(err) {
            console.log(err);       // 打印出错误
        }else {
            console.log(123);       // body为请求回来的数据
            response.writeHead(200);
            response.write(body);
            response.end();
        }
    } );
}).listen(9595, "192.168.31.76");
```






# 服务端允许进行跨域请求

1. 通过修改响应头，允许本服务器可以进行跨域请求

2. 示范代码
```js
let http = require("http");

http.createServer( (request, response) => {
    response.writeHead(200, {
        // 设置编码的格式，与跨域没有关系
        // 下面直接发送汉字字符串，如果不设置编码格式，会造成乱码
        "content-type": "text/html; charset=utf-8",
        // 允许那个域名的请求进行跨域(如果任意域名，可以使用*, 本地路径跨域请求只能用*)
        "Access-Control-Allow-Origin": "*",
        // 允许跨区请求的方式(是GET还是POST)
        "Access-Control-Allow-Methods": "GET",
        // 必须条件
        "Access-Control-Allow-Headers": "content-type, x-requested-with",
    });

    response.write("你好");
    response.end();
    
}).listen(9595, "192.168.31.76");
```